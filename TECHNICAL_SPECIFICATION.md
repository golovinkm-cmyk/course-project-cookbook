# Техническое задание: Персональная кулинарная книга

**Студент:** Головин Кирилл Максимович

**Группа:** 2307В2

---

## 1. Описание проекта

### 1.1 Название системы
 
Разработка приложения "Персональная кулинарная книга" на платформе WPF


### 1.2 Назначение
Система предназначена для хранения базы рецептов и обеспечения удобного доступа пользователя к своим кулинарным идеям, записи личных рецептов с возможностью поиска, фильтрации.


## 2. Функциональные требования

### 2.1 Основные функции системы


#### Функция 1: Добавление нового рецепта
 - **Описание:**  Пользователь может добавлять новые рецепты в свою кулинарную книгу. Заполняет основную информацию о рецепте: название, категория, ингредиенты, пошаговое описание приготовления, время приготовления, сложность.

- **Входные данные:**  Название рецепта, категория, список ингредиентов, инструкция приготовления, время приготовления, уровень сложности

- **Результат:**  Новый рецепт сохранен в базе данных, доступен для просмотра и редактирования

#### Функция 2: Поиск и фильтрация рецептов

- **Описание:** Пользователь может осуществлять поиск рецептов по названию, ингредиентам или категории. Также доступна фильтрация по различным параметрам: время приготовления, сложность, категория.

- **Входные данные:** Ключевые слова для поиска, параметры фильтрации

- **Результат:** Отображение отфильтрованного списка рецептов, соответствующих критериям поиска

#### Функция 3: Просмотр рецептов

- **Описание:**
 Пользователь может просматривать полную информацию о рецепте в удобном формате. Система отображает все детали рецепта: название, категорию, изображение (если есть), список ингредиентов с количествами, пошаговую инструкцию приготовления, время приготовления, уровень сложности и количество порций. В демо-версии некоторые рецепты могут быть заблокированы для просмотра.

- **Входные данные:**
 Выбранный рецепт из списка

- **Результат:**
Отображение полной информации о рецепте в читаемом формате


#### Функция 4: Редактирование рецептов
- **Описание:** Пользователь может изменять существующие рецепты: корректировать название, изменять состав ингредиентов, обновлять инструкцию приготовления, менять категорию и другие параметры.

- **Входные данные:** Измененные данные рецепта

- **Результат:** Обновленная информация о рецепте сохранена в базе данных


#### Функция 5: Управление категориями
- **Описание:** Пользователь может создавать, редактировать и удалять категории для организации рецептов (например: "Супы", "Десерты", "Основные блюда", "Выпечка" и т.д.)

- **Входные данные:** Название категории, описание 

- **Результат:** Создана/изменена/удалена категория в системе


#### Функция 6: Покупка приложения

- **Описание:** Пользователь может приобрести полную версию приложения "Персональная кулинарная книга" через систему оплаты. Система предоставляет выбор лицензии (пожизненная, годовая, месячная). После успешной оплаты активируется полная версия приложения с доступом ко всем функциям.

- **Входные данные:** Выбранный тип лицензии, данные банковской карты (номер, срок действия, CVV код)

- **Результат:** Активирована полная версия приложения, сгенерирован лицензионный ключ, отправка подтверждения на email, запись в таблицу базы данных
---
## 3. Структура базы данных

#### Таблица 1: Categories (Категории)
- **Описание:** Хранит категории рецептов для организации

- **Поля:**

Id (int, PK) — уникальный идентификатор категории

Name (string) — название категории

Description (string?) — описание категории (nullable)

CreatedDate (datetime) — дата создания категории

- **Связи:**

Связь один-ко-многим с таблицей Recipes (одна категория может содержать много рецептов)

---

#### Таблица 2: Recipes (Рецепты)
- **Описание:** Основная таблица для хранения рецептов

- **Поля:**

Id (int, PK) — уникальный идентификатор рецепта

Title (string) — название рецепта

Description (string?) — описание рецепта (nullable)

Instructions (string) — пошаговая инструкция приготовления

PreparationTime (int) — время приготовления в минутах

CookingTime (int) — время готовки в минутах

Servings (int) — количество порций

DifficultyLevel (string) — уровень сложности (легкий, средний, сложный)

CategoryId (int, FK → Categories) — идентификатор категории

CreatedDate (datetime) — дата создания рецепта

ModifiedDate (datetime) — дата последнего изменения

IsFavorite (bool) — признак избранного рецепта

IsLocked (bool) — признак заблокированного рецепта в демо-версии

ImagePath (string?) — путь к изображению рецепта (nullable)

- **Связи:**

CategoryId → Categories.Id

Связь один-ко-многим с таблицей RecipeIngredients

---

#### Таблица 3: Ingredients (Ингредиенты)
- **Описание:** Справочник ингредиентов

- **Поля:**

Id (int, PK) — уникальный идентификатор ингредиента

Name (string) — название ингредиента

Unit (string) — единица измерения (г, мл, шт, по вкусу и т.д.)

Category (string?) — категория ингредиента (овощи, фрукты, мясо и т.д.)

- **Связи:**

Связь один-ко-многим с таблицей RecipeIngredients

---

#### Таблица 4: RecipeIngredients (Ингредиенты рецептов)
- **Описание:** Связующая таблица для хранения ингредиентов конкретных рецептов

- **Поля:**

Id (int, PK) — уникальный идентификатор связи

RecipeId (int, FK → Recipes) — идентификатор рецепта

IngredientId (int, FK → Ingredients) — идентификатор ингредиента

Quantity (decimal) — количество ингредиента

Notes (string?) — дополнительные заметки по ингредиенту (nullable)

- **Связи:**

RecipeId → Recipes.Id

IngredientId → Ingredients.Id

---

#### Таблица 5: Licenses (Лицензии)
- **Описание:** Хранит информацию о покупках приложения

- **Поля:**

Id (int, PK) — уникальный идентификатор лицензии

LicenseKey (string) — уникальный лицензионный ключ

LicenseType (string) — тип лицензии (пожизненная, годовая, месячная)

PurchaseDate (datetime) — дата покупки

ActivationDate (datetime) — дата активации

ExpiryDate (datetime?) — дата окончания действия (для временных лицензий)

IsActive (bool) — статус активности лицензии

CustomerName (string) — имя покупателя

CustomerEmail (string) — email покупателя

Price (decimal) — стоимость лицензии

- **Связи:**

Связь один-ко-одному с таблицей Payments

---

#### Таблица 6: Payments (Платежи)
- **Описание:** Хранит информацию о платежах за приложение

- **Поля:**

Id (int, PK) — уникальный идентификатор платежа

LicenseId (int, FK → Licenses) — идентификатор лицензии

PaymentDate (datetime) — дата и время платежа

Amount (decimal) — сумма платежа

PaymentMethod (string) — метод оплаты (карта)

PaymentStatus (string) — статус платежа (успешно, ошибка, ожидание)

TransactionId (string?) — идентификатор транзакции (nullable)

CardLastFour (string) — последние 4 цифры карты

- **Связи:**

LicenseId → Licenses.Id

---

#### 4. Основные формы приложения 
#### Форма 1: MainWindow (Главная форма)
- **Назначение:**  Основное окно приложения с навигацией по всем разделам кулинарной книги

- **Элементы управления:**

TabControl — вкладки для разных разделов (Рецепты, Категории)

DataGrid — отображение списка рецептов с основной информацией

TextBox (поиск) — поле для быстрого поиска рецептов

ComboBox (фильтр по категориям) — фильтрация рецептов по категориям

StatusBar — отображение статуса приложения (полная версия)

TextBlock (ограничения) — информация об ограничениях демо-версии

- **Действия:**

Кнопка "Добавить рецепт" — открывает RecipeEditWindow для создания нового рецепта 

Кнопка "Редактировать рецепт" — открывает RecipeEditWindow для редактирования выбранного рецепта

Кнопка "Просмотреть рецепт" — открывает RecipeViewWindow для просмотра полной информации

Кнопка "Удалить рецепт" — удаляет выбранный рецепт после подтверждения

Кнопка "Добавить в избранное" — помечает рецепт как избранный

Кнопка "Купить полную версию" — открывает PurchaseWindow для покупки приложения

---

#### Форма 2: RecipeEditWindow (Форма редактирования рецепта)

- **Назначение:** Создание и редактирование рецептов

- **Элементы управления:**

TextBox (название) — ввод названия рецепта

ComboBox (категория) — выбор категории из списка

TextBox (описание) — ввод описания рецепта

TextBox (инструкция) — многострочное поле для пошаговой инструкции

NumericUpDown (время приготовления) — установка времени подготовки

NumericUpDown (время готовки) — установка времени готовки

NumericUpDown (количество порций) — установка количества порций

ComboBox (уровень сложности) — выбор сложности рецепта

DataGrid (ингредиенты) — таблица для ввода ингредиентов с количеством

CheckBox (избранное) — отметка избранного рецепта

Button (загрузить изображение) — загрузка изображения рецепта

Image (превью) — предпросмотр загруженного изображения

TextBlock (демо-предупреждение) — предупреждение о ограничениях демо-версии

- **Действия:**

Кнопка "Сохранить" — сохранение рецепта в базу данных (проверка лимитов демо-версии)

Кнопка "Отмена" — закрытие формы без сохранения

Кнопка "Добавить ингредиент" — добавление новой строки в список ингредиентов

Кнопка "Удалить ингредиент" — удаление выбранного ингредиента

Кнопка "Загрузить изображение" — выбор и загрузка изображения для рецепта

---

#### Форма 3: RecipeViewWindow (Форма просмотра рецепта)

- **Назначение:** Просмотр полной информации о рецепте

- **Элементы управления:**

TextBlock (название) — отображение названия рецепта

TextBlock (категория) — отображение категории рецепта

Image (изображение) — отображение изображения рецепта (если есть)

TextBlock (описание) — отображение описания рецепта

DataGrid (ингредиенты) — таблица ингредиентов с количествами и единицами измерения

TextBlock (время приготовления) — отображение общего времени приготовления

TextBlock (количество порций) — отображение количества порций

TextBlock (уровень сложности) — отображение уровня сложности

TextBox (инструкция) — многострочное поле с пошаговой инструкцией (только для чтения)


- **Действия:**

Кнопка "Закрыть" — закрытие формы просмотра

Кнопка "Редактировать" — переход в RecipeEditWindow для редактирования рецепта

Кнопка "Купить полную версию" — переход в PurchaseWindow (если рецепт заблокирован)

---

#### Форма 4: CategoriesWindow (Управление категориями)

- **Назначение:** Создание, редактирование и удаление категорий рецептов

- **Элементы управления:**

DataGrid — отображение списка категорий

TextBox (название категории) — ввод названия новой категории

TextBox (описание категории) — ввод описания категории

TextBox (поиск категорий) — поиск по названию категорий

- **Действия:**

Кнопка "Добавить категорию" — создание новой категории

Кнопка "Редактировать категорию" — изменение выбранной категории

Кнопка "Удалить категорию" — удаление выбранной категории

---

#### Форма 5: PurchaseWindow (Покупка приложения)

- **Назначение:** Оформление покупки полной версии приложения

- **Элементы управления:**

ComboBox (тип лицензии) — выбор типа лицензии (пожизненная, годовая, месячная)

TextBlock (цена) — отображение стоимости выбранной лицензии

TextBox (имя) — ввод имени покупателя

TextBox (email) — ввод email для отправки лицензионного ключа

TextBox (номер карты) — ввод номера банковской карты

TextBox (срок действия) — ввод срока действия карты (MM/YY)

TextBox (CVV) — ввод кода безопасности карты

TextBox (владелец карты) — ввод имени владельца карты

CheckBox (соглашение) — принятие лицензионного соглашения

- **Действия:**

Кнопка "Купить" — обработка платежа и активация лицензии

Кнопка "Отмена" — отмена операции покупки


---

#### Форма 6: ActivationWindow (Активация приложения)

- **Назначение:** Активация полной версии приложения по лицензионному ключу

- **Элементы управления:**

TextBox (лицензионный ключ) — ввод ключа активации

TextBlock (информация) — информация о лицензии

TextBlock (статус) — статус активации

- **Действия:**

Кнопка "Активировать" — проверка и активация лицензионного ключа

Кнопка "Купить новую лицензию" — переход в PurchaseWindow

---

#### 5. Схема переходов между формами

**Текстовое описание:** 

**Схема навигации**

**Запуск приложения** → MainWindow 

**[MainWindow]**

Секция "Рецепты":

Кнопка "Добавить рецепт" → RecipeEditWindow (режим создания)

Кнопка "Редактировать рецепт" → RecipeEditWindow (режим редактирования выбранного рецепта)

Кнопка "Просмотреть рецепт" → RecipeViewWindow (просмотр полной информации о рецепте)

Кнопка "Удалить рецепт" → диалог подтверждения → удаление, остаёмся на главной

Двойной клик по рецепту → RecipeViewWindow (альтернативный способ просмотра)

Секция "Категории":

Кнопка "Управление категориями" → CategoriesWindow

Секция "Покупка":

Кнопка "Купить полную версию" → PurchaseWindow

Из RecipeViewWindow
Кнопка "Редактировать" → RecipeEditWindow (режим редактирования текущего рецепта)
Кнопка "Закрыть" → возврат на MainWindow

Из RecipeEditWindow
Кнопка "Сохранить" → сохранение данных → возврат на MainWindow (обновить список рецептов)
Кнопка "Отмена" → возврат на MainWindow без сохранения

Из CategoriesWindow
Кнопка "Сохранить" → сохранение изменений → возврат на MainWindow (обновить фильтр категорий)
Кнопка "Закрыть" → возврат на MainWindow

Из PurchaseWindow
Кнопка "Купить":

Успешная оплата → сообщение об успехе → возврат на MainWindow

Неудачная оплата → сообщение об ошибке → остаёмся на PurchaseWindow
Кнопка "Отмена" → возврат на MainWindow

Из ActivationWindow
Кнопка "Активировать" → проверка ключа → сообщение об успешной активации → возврат на MainWindow
Кнопка "Купить новую лицензию" → PurchaseWindow







